version: "3.7"
services:

  aggregator_xai:
    image: openfl_xai/aggregator
    container_name: aggregator_xai
    environment:
      - PYTHONUNBUFFERED=1
    
  col0:
    image: openfl_xai/collaborator
    depends_on:
     - aggregator_xai
    container_name: col0
    volumes:
      - ./certificates/col0_cert_folder.zip:/current_workspace/col0_cert_folder.zip
      - ./data/col0_data.zip:/current_workspace/data/col0_data.zip
    command:
      - /bin/sh
      - -c
      - |
        unzip -n /current_workspace/col0_cert_folder.zip
        unzip -o /current_workspace/data/col0_data.zip -d /current_workspace/data
        python3 start_collaborator.py
    environment:
      - COLLABORATOR_NAME=col0
      - PYTHONUNBUFFERED=1
